# 객체지향의 사실과 오해: 02 이상한 나라의 객체
> "행동이 상태를 결정한다."

## 객체
### 객체란 인간이 분명하게 인지하고 구별할 수 있는 물리적인 또는 개념적인 경계를 지닌 어떤 것.
  - 하나의 개별적인 실체로 `식별 가능한` 물리적인 또는 개념적인 사물은 어떤 것이라도 객체가 될 수 있다.
  - `상태`, `행동`, `식별자` 를 지닌 실체로 보자. 
  - 자신의 상태를 스스로 관리하는 자율적인 존재 
- 객체는 상태를 가지며 상태는 변경 가능하다
- 객체의 상태를 변경시키는 것은 객체의 행동이다.
  - 행동의 결과는 상태에 의존적이며 상태를 이용해 서술할 수 있다.
  - 행동의 순서가 결과에 영향을 미친다.
- 객체는 어떤 상태에 있더라도 유일하게 식별 가능하다.
- 단순한 값들은 객체가 아니다. => 다른 객체의 상태를 표현하는 데 사용
  

- 쿼리(query) :  객체의 상태를 조회하는 작업
- 명령(command): 객테의 상태를 변경하는 작업 
- 사용자는 객체가 제공하는 명령 버튼과 쿼리 버튼으로 구성된 인터페이스를 통해서만 객체에 접근할 수 있다.


### 캡슐화  : 객체는 상태를 캡슐 안에 감춰둔 채 외부로 노출하지 않는다. 
  - 외부로 노출되는 것은 행동뿐이며, 외부에서 객체에 접근할 수 있는 방법 역시 행동뿐이다. 
  - 객체의 자율성을 높인다.
  - 협력을 단순하고 유연하게 만든다.
  

### **링크(link)** : 객체와 객체 사이의 `의미`있는 연결 ( 객체 간의 선으로 표현 )
  - *객체의 링크를 통해서만 메시지를 주고받을 수 있다.* 
  - 객체가 다른 객체를 참조할 수 있다는 것을 의미 
  - 객체가 다른 객체의 식별자를 알고 있다는 것으로 표현된다. 


### 속성(attribute) : 객체를 구성하는 단순한 값


## 상태
- 특정 시점에 객체가 가지고 있는 정보의 집합으로 객체의 구조적 특징을 표현.
- 객체에 존재하는 정적인 프로퍼티와 동적인 프로퍼티 값으로 구성된다.
- 어떤 행동의 결과는 과거에 어던 행동들이 일어났었느냐에 의존 
  - 과거에 발생한 행동의 이력을 통해 현재 발생한 행동의 결과를 판단하는 방식은 복잡하고 번거로우며 이해하기 어렵다
  - => 상태를 이용하면 과거의 모든 행동 이력을 설명하지 않고도 행동의 결과를 쉽게 예측하고 설명할 수 있다.
    - 현재를 기반으로 객체의 행동 방식을 이해할 수 있다.
- 객체의 상태는 단순한 값과 객체의 조합으로 표현할 수 있다. 


### 프로퍼티(property) : 객체의 상태를 구성하는 모든 특징
  - 일반적으로 프로퍼티는 변경되지 않고 고정되기 때문에 `정적`이다.
  - `프로퍼티 값`은 시간이 흐름에 따라 변경되기 때문에 `동적`이다.
  - 단순한 값과 다른 객체를 참조하는 링크로 구분할 수 있다. 

       
## 행동
- 외부의 요청 또는 수신된 메시지에 응답하기 위해 동작하고 반응하는 활동 
- 객체의 상태를 변경하는 것은 객체의 `자발적인 행동`뿐이다.
- 다른 객체로 하여금 간접적으로 객체의 상태를 변경하는 것을 가능하게 한다. 
- 객체는 `스스로의 행동`에 의해서만 상태가 변경되는 것을 보장함으로써 객체의 자율성을 유지
  - `상태`와 상태를 조작하기 위한 `행동`을 하나의 단위로 묶는 것이 객체지향의 기본 사상 
- 객체의 행동은 상태를 변경시키지만 행동의 결과는 객체의 상태에 의존적.          


- 객체의 행동은 상태에 영향을 받고, 상태를 변경시킨다.
- 객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법.
- 객체는 수신된 메시지에 따라 적절히 행동하면서 협력에 참여하고 그 결과로 자신의 상태를 변경한다.
 
## 식별자
- 객체를 서로 구별할 수 있는 특정한 프로퍼티
- 모든 객체는 식별자를 가지며 식별자를 이용해 객체를 구별할 수 있다. 


### 값(value) : 숫자, 문자열, 날짜, 시간, 금액 등 변하지 않는 양을 모델링 
  - 상태가 변하지 않기 때문에 불변 상태를 가진다. ( immutable state )
  - 두 인스턴스의 상태가 같다면 두 인스턴스를 같은 것으로 판단. 
    - 상태를 이용해 두 값이 같은지 판단할 수 있는 성질 `동등성(equality)`이라고 한다. 
    - 상태가 변하지 않기 때문에 동등성을 판별할 수 있다.


- 객체는 시간에 따라 변경되는 상태를 포함하며, 행동을 통해 상태를 변경한다. `가변 상태`
- 두 객체의 상태가 다르더라도 식별자가 같다면 두 객체를 같은 객체로 판단할 수 있다. 
- `식별자`를 기반으로 객체가 같은지를 판단할 수 있는 성질을 `동일성(identical)`이라고 한다. 

- 값은 식별자를 가지지 않기 때문에 `상태`를 이용한 `동등성` 검사를 통해 두 인스턴스를 비교
- 객체는 상태가 변경될 수 있기 때문에 `식별자`를 이용한 `동일성` 검사를 통해 두 인스턴스를 비교

## 함정: 상태를 중심으로 객체를 바라보기 
1. 상태를 먼저 결정할 경우 캡슐화되지 못하고 공용 인터페이스에 그대로 노출될 확률이 높아짐
2. 협력에 적합하지 못한 객체를 창조 
3. 다양한 협력에 참여하기 어렵기 때문에 재사용성이 저하됨.


> 객체의 적합성을 결정하는 것은 상태가 아니라 객체의 행동이다.
> 
## 객체지향 설계 
- 객체지향 설계 : 필요한 협력 고려 => 협력에 필요한 행동 결정 => 행동을 수행할 객체 선택
  - 객체의 행동: 협력에 참여하면서 완수해야 하는 책임을 의미
  