# 📚 자바와 JUnit을 활용한 실용주의 단위 테스트 
## 📖 4부 더 큰 단위 테스트 그림

## 🔎 12장 테스트 주도 개발

작성하려는 코드가 있다면 항상 먼저 어떻게 그 코드를 테스트할지 고민해야 한다. 
코드를 작성한 후에 어떻게 테스트할지 고민하기보다 작성할 코드를 묘사하는 테스트를 설계해야 한다.

TDD에서 단위 테스트를 시스템의 모양을 잡고 통제하는 도구로 활용해야 한다. 
단위 테스트는 소프트웨어를 어떻게 만들어야할지에 관한 잘 훈련된 사이클의 핵심적인 부분이다. 
따라서 TDD를 채택하면 소프트웨어 설계는 달라지고, 아마도 더 좋아질 것이다. 

<br>

### 📍 1. TDD의 주된 이익

코드를 깨끗하게 유지하도록 치열하게 싸우지 않으면 시스템은 대개 점점 퇴화한다. 코드를 재빠르게 추가할 수는 있지만 처음에는 좋은 코드라기보다는 그다지 위대하지 않은 코드일 가능성이 높다. 

TDD에서는 코드가 변경될 것이라는 두려움을 지울 수 있다. 리팩토링은 위험 부담이 있는 일이기도 하고 일견 위험하지 않아 보이는 변경을 할 때도 실수를 많이 하고는 한다. 
하지만 TDD를 잘 따른다면 구현하는 실질적인 모든 사례에 대해 단위 테스트를 작성하게 된다. 
이러한 단위 테스트는 코드를 지속적으로 발전시킬 수 있는 자유를 준다. 

<br>

### 📍 2. 단순하게 시작 

TDD는 세 부분의 사이클로 구성된다. 

- 실패하는 테스트 코드 작성하기
- 테스트 통과시키기
- 이전 두 단계에서 추가되거나 변경된 코드 개선하기 

첫 번째 단계는 시스템에 추가하고자 하는 동작을 정의하는 테스트 코드를 작성하는 것이다. 
일반적으로 이미 있는 코드에 가능한 최소한(이면서 유용한)만 더하는 테스트를 작성하려고 할 것이다. 

테스트 코드를 점진적으로 작성한다.

작은 테스트를 먼저 작성하고 그 후에 작은 코드를 작성한다. 오류가 발생하면 컴파일되는 수준으로만 코드를 작성하여 대응한다. 

항상 테스트가 먼저 실패하길 원한다. 그래야 기대하는 동작(테스트가 기술하는)이 아직 시스템에 존재하지 않는다는 것을 보여 줄 수 있다. 

TDD의 점진적인 사고방식을 따르는 것은 중요하다.

<br>

### 📍 3. 또 다른 증분 추가

실패하는 각 테스트에 대해 그 테스트를 통과할 수 있는 코드만 추가하라. 가능한 가장 작은 증분(increment)을 추가하는 것이다. 테스트가 나타내는 `명세`를 정확히 코딩하라. 테스트가 모두 통과한다면 잠재적으로 코드를 배포할 수 있다. 그 지점에서 테스트는 시스템이 무엇을 하는지 (더도 덜도 아니게) 문서화한다. 

TDD 사이클에 따르는 좀 더 실용적인 관점에서 가장 작은 양의 코드를 작성하는 것은 대부분 먼저 실패하는 또 다른 테스트를 만들 수 있다는 의미이다. 결함 있는 코드를 작성할 때는 바로 알아내는 것이 더 좋다. 

<br>

### 📍 4. 테스트 정리

테스트는 짧고 깔끔해야 한다. 

TDD의 아름다움은 모든 기능에 대해 먼저 테스트를 작성한다는 것이고, 그것은 항상 막 작성한 코드를 리팩토링하고 정리할 수 있다는 자신감을 준다. 

**TDD는 거의 모든 코드에 안전한 리팩토링을 가능하게 한다.**

`@Before` 메서드의 이름도 그것을 묘사하는 더 좋은 이름으로 변경하라. 

변수 이름을 변경하는 것은 독자에게 커다란 정보를 준다. 작은 코드 조각을 의도를 알 수 있는 이름의 도우미 메서드로 추출하면 마찬가지로 테스트를 향상시키는 데 많은 도움이 된다. 

<br>

### 📍 5. 또 다른 작은 증분

TDD로 생각하는 부분의 일부는 작성할 필요가 있는 다음 테스트를 결정하는 것이다. 
프로그래머로서 임무는 코드가 다루어야 하는 모든 가능한 순열과 시나리오를 이해하는 것이다. 
TDD로 성공하려면 이들 시나리오를 테스트로 만들고 각 테스트를 통과하게 만드는 코드 증분을 최소화하는 순으로 코드를 작성하는 것이다. 

<br>

### 📍 6. 다수의 응답 지원: 작은 설계 우회로

TDD를 할 때 다른 코드를 전혀 건드리지 않고 해당 클래스만 변경할 필요는 없다. 
필요한 사항이 있다면 설계를 변경하여 다른 클래스로 넘어가도 된다. 

<br>

### 📍 7. 인터페이스 확장

테스트를 리팩토링하면 TDD 사이클을 짧게 유지하는 데 도움을 준다. 새로운 테스트를 만드는 데 1~2분 정도로 말이다. 

TDD가 항상 최상의 설계를 마법처럼 만들어 내지는 않음을 기억하라. 테스트들을 활용하여 원할 때 더 나은 설계로 리팩토링할 수 있다. 

<br>

### 📍 8. 마지막 테스트들 

<br>

### 📍 9. 문서로서의 테스트

세심하게 테스트를 작성할수록 테스트는 프로덕션 클래스에 의도적으로 설계된 동작들을 더 많이 문서화할 수 있다. 
테스트 주도 클래스를 더 잘 이해하려면 테스트 이름부터 살펴라.
포괄적인 테스트 이름의 집합은 그 클래스의 의도된 용량을 전체적인 관점 요약으로 제공한다. 
테스트 이름이 다른 것들과 함께 깔끔하고 일관성이 있을수록 더 신뢰할 수 있는 클래스 문서가 된다. 

테스트하려는 동작을 테스트 클래스의 이름으로 넣으면 개별 테스트 이름에서 중복되는 정보를 제거할 수 있다. 

**정지적으로 테스트 이름이 서로 잘 어울리는지 확인하라.**

<br>

### 📍 10. TDD의 리듬

TDD의 사이클은 짧다. 

약 10분 정도의 시간 제한을 걸어 봐라. 10분 동안 어떤 긍정적인 피드백(테스트 통과)을 받지 못했다면 작업 중인 코드는 폐기하고 다시 좀 더 작은 단계로 도전하라. 

나쁜 코드는 버려라. 각 TDD의 사이클은 테스트를 가설로 한 시간 제한이 있는 실험으로 취급하라. 
실험이 엉망이 되었다면 다시 시작하여 가정의 범위를 축소(좀 더 작은 단계를 밟음)하면 무엇이 잘못되었는지 찾는 데 도움이 될 것이다. 
